<link rel="import" href="../bower_components/polymer/polymer.html">

<dom-module id="main-page">
<template>
  <style>
    app-header paper-icon-button {
      --paper-icon-button-ink-color: white;
    }

    :host {
      --app-primary-color: #404040;
    }

    app-drawer-layout {
      /* set the nav drawer background color */
      --app-drawer-background-color: var(--app-primary-color);
    }

    .nav-menu {
      background-color: var(--app-primary-color);
      color: #fff;
    }

    a {
      text-decoration: none;
      color: inherit;
      font-size: inherit;
    }

    .nav-menu > a {
      display: block;
      padding: 12px 16px;
      font-size: 20px;
      font-weight: 500;
    }

    .nav-menu > a.iron-selected {
      background-color: #888;
    }

    [main] app-header {
      border-bottom: 1px solid #888;
      background-color: #2196f3;
      color: #444;
      padding:20px 0;
    }

    .main-title-toolbar {
      @apply(--layout-center-center);
    }

    .title {
      font-size: 50px;
      font-weight: 800;
    }

    #navTitle {
      /*position: absolute;*/
      color: #fff;
    }

    /* hide nav title when is not in narrow layout */
    app-drawer-layout:not([narrow]) #navTitle {
      display: none;
    }

    article-headline {
      @apply(--shadow-transition);
      @apply(--shadow-elevation-2dp);
      cursor: pointer;
    }

    article-headline:hover {
      @apply(--shadow-elevation-6dp);
    }

    article-detail {
      max-width: 736px;
      margin: 64px auto;
      background-color: #fff;
      @apply(--shadow-elevation-2dp);
    }

    .no-contents {
      height: calc(100vh - 129px);
      @apply(--layout-horizontal);
      @apply(--layout-center-center);
      padding: 8px;
      text-align: center;
      font-size: 30px;
      color: #bbb;
    }

    @media (max-width: 580px) {

      /* make title smaller to fit on screen */
      .title {
        font-size: 30px;
      }
      [main] app-header{
        padding:0;
      }

    }

    /* narrow layout */
    @media (max-width: 808px) {

      article-detail {
        max-width: none;
        margin: 0;
      }

    }
    paper-button{
      display: -webkit-box;
      display: -webkit-flex;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-flex:100%;
      -webkit-flex:100%;
      -ms-flex:100%;
              flex:100%;
      margin:8px 15px;
      justify-content: center;
      font-size: 14px;
      font-weight: 800;
      background: white;
    }

    #greeting{
      color:white;
      font-size: 24px;
      font-weight: 800;

    }
    app-toolbar{
      -webkit-flex-wrap: wrap;  -ms-flex-wrap: wrap;  flex-wrap: wrap;
    }
  </style>

  <app-drawer-layout>
    <iron-location path="{{path}}" hash="{{hash}}" query="{{query}}"
                     dwell-time="{{dwellTime}}">
    </iron-location>
    <!-- nav panel -->
    <app-header-layout drawer has-scrolling-region>

      <app-header fixed>
        <app-toolbar style="padding:10px 0;height:250px;justify-content:center;">
          <div>
            <iron-image style="overflow:hidden;height:200px;width:200px;background-color:#5a7785;border-radius:50%;" src="../images/author.jpg" preload sizing="cover"></iron-image>
          </div>
          <div id="greeting">
            Hi I'm Steve!
          </div>
        </app-toolbar>
      </app-header>
      <div>
        <iron-selector id="nav" class="nav-menu" selected="{{hash}}" attr-for-selected="name">
          <a href="#" name="">Home</a>
          <a href="#/about" name="/about">About</a>
        </iron-selector>
      </div>
    </app-header-layout>

    <!-- main panel -->
    <app-header-layout main>

      <app-header fixed effects="waterfall">

        <!-- top toolbar -->
        <app-toolbar>
          <!-- menu button -->
          <paper-icon-button icon="menu" drawer-toggle></paper-icon-button>
          <a href="#" on-tap="_home" id="mainTitle" class="title">
            Legacy Support
          </a>
        </app-toolbar>
      </app-header>

      <div>
        <blog-body page="{{hash}}" posts="{{articles}}"></blog-body>
        <iron-ajax url="posts/articles.json" auto last-response="{{articles}}"></iron-ajax>
      </div>
    </app-header-layout>

  </app-drawer-layout>
</template>
<script>
  (function(){
    Polymer({
      is: 'main-page',
      properties:{
        hash:{
          type:String,
          value:""
        }
      },
      _home:function() {
        window.location.hash = "";
      },
      ready:function() {
        (function(i,s,o,g,r,a,m){
  			i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  				(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  				m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)

  	    })
  	  	(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  	  	ga('create', 'UA-55314535-1', 'auto');
  	  	ga('send', 'pageview');
      }
    });
  })();
</script>
</dom-module>
